import socket import requests from requests.exceptions import RequestException def check_url(url): try: response = requests.get(url) if response.status_code == 200: print(f"URL {url} is accessible.") else: print(f"URL {url} returned status code {response.status_code}.") except RequestException as e: print(f"An error occurred: {e}") def check_ports(ip, ports): open_ports = [] for port in ports: sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.settimeout(1) result = sock.connect_ex((ip, port)) if result == 0: open_ports.append(port) sock.close() return open_ports def main(): url = input("请输入要检测的URL: ") ip = input("请输入服务器IP地址: ") print("检测URL:") check_url(url) print("检测端口开放情况:") all_ports = list(range(1, 65536)) open_ports = check_ports(ip, all_ports) if open_ports: print(f"开放的端口有: {open_ports}") else: print("没有发现开放的端口。") if __name__ == "__main__": main()
